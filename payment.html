<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="payment_title">Ã–deme - Security Lab</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">ğŸ” Security Lab</div>
            <ul class="nav-menu">
                <li><a href="index.html" data-i18n="nav_home">Ana Sayfa</a></li>
                <li><a href="payment.html" data-i18n="nav_payment">Ã–deme</a></li>
                <li><a href="profile.html" data-i18n="nav_profile">Profil</a></li>
            </ul>
            <div class="language-selector">
                <select id="languageSelect" onchange="changeLanguage(this.value)">
                    <option value="tr">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e</option>
                    <option value="en">ğŸ‡¬ğŸ‡§ English</option>
                    <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
                    <option value="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
                </select>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="hero">
            <h1 data-i18n="payment_hero_title">ğŸ’³ Ã–deme Sistemi</h1>
            <p class="subtitle" data-i18n="payment_hero_subtitle">PCI DSS Zafiyetleri | CVV GÃ¼venliÄŸi | Kart DoÄŸrulama</p>
        </div>

        <div class="warning-box">
            <h2 data-i18n="warning_title">âš ï¸ UYARI</h2>
            <p data-i18n="warning_text">Bu Ã¶deme sistemi kasÄ±tlÄ± olarak PCI DSS standartlarÄ±na UYMAMAKTADIR. Sadece test amaÃ§lÄ±dÄ±r!</p>
        </div>

        <div class="test-categories">
            <!-- Payment Form -->
            <div class="category-card" style="grid-column: span 2;">
                <h2 data-i18n="payment_form_title">ğŸ’³ Kredi KartÄ± Bilgileri</h2>
                <form id="paymentForm">
                    <div class="form-group">
                        <label for="cardNumber" data-i18n="card_number">Kart NumarasÄ±</label>
                        <input type="text" id="cardNumber" name="cardNumber" 
                               placeholder="1234 5678 9012 3456" 
                               maxlength="19" 
                               autocomplete="cc-number">
                        <!-- Vulnerable: Autocomplete enabled on card number -->
                        <span id="cardType" style="font-size: 0.875rem; color: #6b7280;"></span>
                    </div>

                    <div class="form-group">
                        <label for="cardHolder" data-i18n="card_holder">Kart Sahibi</label>
                        <input type="text" id="cardHolder" name="cardHolder" 
                               placeholder="AHMET YILMAZ" 
                               autocomplete="cc-name">
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem;">
                        <div class="form-group">
                            <label for="expiryMonth" data-i18n="expiry_month">Ay</label>
                            <select id="expiryMonth" name="expiryMonth" autocomplete="cc-exp-month">
                                <option value="">--</option>
                                <option value="01">01</option>
                                <option value="02">02</option>
                                <option value="03">03</option>
                                <option value="04">04</option>
                                <option value="05">05</option>
                                <option value="06">06</option>
                                <option value="07">07</option>
                                <option value="08">08</option>
                                <option value="09">09</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="expiryYear" data-i18n="expiry_year">YÄ±l</label>
                            <select id="expiryYear" name="expiryYear" autocomplete="cc-exp-year">
                                <option value="">----</option>
                                <option value="2024">2024</option>
                                <option value="2025">2025</option>
                                <option value="2026">2026</option>
                                <option value="2027">2027</option>
                                <option value="2028">2028</option>
                                <option value="2029">2029</option>
                                <option value="2030">2030</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="cvv">CVV</label>
                            <input type="text" id="cvv" name="cvv" 
                                   placeholder="123" 
                                   maxlength="4" 
                                   autocomplete="cc-csc">
                            <!-- Vulnerable: CVV stored in browser -->
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="amount" data-i18n="amount">Tutar (TL)</label>
                        <input type="number" id="amount" name="amount" 
                               value="99.99" 
                               step="0.01" 
                               min="0.01">
                    </div>

                    <div class="form-group">
                        <label>
                            <input type="checkbox" name="saveCard" id="saveCard">
                            <span data-i18n="save_card">KartÄ±mÄ± kaydet (gÃ¼venli deÄŸil!)</span>
                        </label>
                    </div>

                    <button type="submit" class="btn btn-success btn-block" data-i18n="pay_now">Ã–deme Yap</button>
                </form>

                <div id="paymentResult" style="margin-top: 1.5rem;"></div>
            </div>

            <!-- PCI DSS Violations -->
            <div class="category-card">
                <h2 data-i18n="pci_violations_title">ğŸš¨ PCI DSS Ä°hlalleri</h2>
                <ul id="pciViolationsList">
                    <li data-i18n="pci_v1">âŒ Kart numarasÄ± plain text saklanÄ±yor</li>
                    <li data-i18n="pci_v2">âŒ CVV localStorage'da tutuluyor</li>
                    <li data-i18n="pci_v3">âŒ SSL/TLS ÅŸifreleme eksik</li>
                    <li data-i18n="pci_v4">âŒ Autocomplete aktif (gÃ¼vensiz)</li>
                    <li data-i18n="pci_v5">âŒ Kart numarasÄ± loglanÄ±yor</li>
                    <li data-i18n="pci_v6">âŒ CVV console'da gÃ¶rÃ¼nÃ¼yor</li>
                    <li data-i18n="pci_v7">âŒ 3D Secure yok</li>
                    <li data-i18n="pci_v8">âŒ Fraud detection yok</li>
                    <li data-i18n="pci_v9">âŒ Rate limiting yok</li>
                    <li data-i18n="pci_v10">âŒ PAN maskeleme yok</li>
                </ul>
            </div>

            <!-- Saved Cards -->
            <div class="category-card">
                <h2 data-i18n="saved_cards_title">ğŸ’¾ KaydedilmiÅŸ Kartlar</h2>
                <div id="savedCardsList"></div>
                <p style="margin-top: 1rem; color: #dc2626;" data-i18n="saved_cards_warning">âš ï¸ Kartlar ÅŸifrelenmeden localStorage'da!</p>
            </div>

            <!-- Test Cards -->
            <div class="category-card">
                <h2 data-i18n="test_cards_title">ğŸ¯ Test KartlarÄ±</h2>
                <div class="code-block">
                    <strong>Visa:</strong> 4532 1234 5678 9010<br>
                    <strong>Mastercard:</strong> 5425 2334 3010 9903<br>
                    <strong>Amex:</strong> 3782 822463 10005<br>
                    <strong>CVV:</strong> 123 (Visa/MC), 1234 (Amex)<br>
                    <strong data-i18n="expiry">Son Kullanma:</strong> 12/2025
                </div>
                <button class="btn btn-primary" onclick="fillTestCard()" data-i18n="fill_test_card">Test KartÄ± Doldur</button>
            </div>

            <!-- CVV Brute Force -->
            <div class="category-card">
                <h2 data-i18n="cvv_bruteforce_title">ğŸ”¢ CVV Brute Force</h2>
                <p data-i18n="cvv_bruteforce_desc">CVV iÃ§in rate limiting yok:</p>
                <button class="btn btn-danger" onclick="bruteForceCVV()" data-i18n="start_bruteforce">Brute Force BaÅŸlat</button>
                <div id="bruteforceResult" style="margin-top: 1rem;"></div>
            </div>

            <!-- Payment Logs -->
            <div class="category-card">
                <h2 data-i18n="payment_logs_title">ğŸ“‹ Ã–deme LoglarÄ± (Exposed!)</h2>
                <div class="code-block" id="paymentLogs" style="max-height: 200px; overflow-y: auto; font-size: 0.75rem;"></div>
            </div>
        </div>

        <!-- Transaction History -->
        <div class="data-table" style="margin-top: 2rem;">
            <h3 style="padding: 1rem;" data-i18n="transaction_history">ğŸ’° Ä°ÅŸlem GeÃ§miÅŸi</h3>
            <table>
                <thead>
                    <tr>
                        <th data-i18n="th_date">Tarih</th>
                        <th data-i18n="th_card">Kart</th>
                        <th data-i18n="th_amount">Tutar</th>
                        <th data-i18n="th_status">Durum</th>
                        <th data-i18n="th_cvv">CVV (EXPOSED!)</th>
                    </tr>
                </thead>
                <tbody id="transactionHistory">
                    <tr>
                        <td>2024-01-15 10:30</td>
                        <td>**** **** **** 9010</td>
                        <td>â‚º99.99</td>
                        <td><span class="badge badge-success" data-i18n="status_success">BaÅŸarÄ±lÄ±</span></td>
                        <td>123</td>
                    </tr>
                    <tr>
                        <td>2024-01-15 09:15</td>
                        <td>**** **** **** 3456</td>
                        <td>â‚º250.00</td>
                        <td><span class="badge badge-danger" data-i18n="status_failed">BaÅŸarÄ±sÄ±z</span></td>
                        <td>456</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- PCI DSS Test Scenarios -->
        <div class="category-card" style="margin-top: 2rem;">
            <h2 data-i18n="test_scenarios_title">ğŸ¯ Test SenaryolarÄ±</h2>
            <div id="testScenarios">
                <h3 data-i18n="scenario_1_title">1. Kart NumarasÄ± Storage</h3>
                <p data-i18n="scenario_1_desc">Kartlar plain text olarak localStorage'da saklanÄ±yor. DevTools ile gÃ¶rÃ¼lebilir.</p>

                <h3 data-i18n="scenario_2_title">2. CVV Persistence</h3>
                <p data-i18n="scenario_2_desc">CVV asla saklanmamalÄ± ama burada localStorage'da!</p>

                <h3 data-i18n="scenario_3_title">3. Man-in-the-Middle</h3>
                <p data-i18n="scenario_3_desc">HTTP Ã¼zerinden (HTTPS deÄŸil) kart bilgileri gÃ¶nderiliyor (simÃ¼le edildi).</p>

                <h3 data-i18n="scenario_4_title">4. Card Testing (Carding)</h3>
                <p data-i18n="scenario_4_desc">Botlar farklÄ± kart numaralarÄ±nÄ± test edebilir. Rate limiting yok.</p>

                <h3 data-i18n="scenario_5_title">5. CVV Brute Force</h3>
                <p data-i18n="scenario_5_desc">CVV sadece 3-4 haneli. Brute force mÃ¼mkÃ¼n.</p>
            </div>
        </div>
    </div>

    <footer>
        <p data-i18n="footer_text">ğŸ”“ Deliberately Vulnerable Payment System</p>
        <p data-i18n="footer_warning">âš ï¸ ASLA gerÃ§ek kart bilgilerinizi girmeyin!</p>
    </footer>

    <script src="js/i18n.js"></script>
    <script src="js/payment.js"></script>
    <script>
        // Load saved language
        const savedLang = localStorage.getItem('language') || 'tr';
        document.getElementById('languageSelect').value = savedLang;
        changeLanguage(savedLang);
    </script>
</body>
</html>
